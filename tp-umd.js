!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TimepickerUI=t()}(this,function(){"use strict";const e=(e,t)=>({...t,...e}),t=(e,t)=>!!e&&e.classList.contains(t),i=(e,t,i,s)=>{if(e){if(t){const s=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});e.dispatchEvent(s)}if(s&&"function"==typeof s)try{s(i)}catch(e){console.warn("TimepickerUI: Error in callback:",e)}}},s=(e,t)=>Array.from({length:Number(t)-Number(e)+1},(t,i)=>Number(e)+i),r=(e,t)=>Array.from({length:Number(t)-Number(e)+1},(e,i)=>Number(t)-i).reverse(),n=e=>{e&&"function"==typeof e&&e()},o=(e="")=>{const t=e.replace(/(AM|PM|am|pm)/,e=>` ${e}`),i=new Date(`September 20, 2000 ${t}`);return`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`},c=e=>{const[t,i]=e.split(":"),s=Number(t),r=Number(i);return`${s<=9?"0"+s:s}:${r<=9?"0"+r:r}`},a=(e,t)=>{if(e.length<2)return!1;const i=e.map(e=>{const[i,s]=e.trim().split("-");let r,n;if("12h"===t){if(!/\s?(AM|PM|am|pm)\s?$/.test(i.trim())||!/\s?(AM|PM|am|pm)\s?$/.test(s.trim()))throw new Error(`Invalid 12h format in interval: "${e}". AM/PM is required for 12h clock type.`);r=o(i.trim()),n=o(s.trim())}else{if(/\s?(AM|PM|am|pm)\s?/.test(i.trim())||/\s?(AM|PM|am|pm)\s?/.test(s.trim()))throw new Error(`Invalid 24h format in interval: "${e}". AM/PM is not allowed for 24h clock type.`);r=c(i.trim()),n=c(s.trim())}return{start:r,end:n,original:e}});for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++){const s=i[e],r=i[t];if(s.start<=r.end&&s.end>=r.start||r.start<=s.end&&r.end>=s.start)throw new Error(`Overlapping time intervals detected: "${s.original}" overlaps with "${r.original}"`)}return!1},l=e=>e.replace(/[^0-9:APMapm\s]/g,""),m="timepicker-ui",h="mousedown mouseup mousemove mouseleave mouseover touchstart touchmove touchend",u="active",p="is-rippling",d="ripple-hold";let k=null;function v(e){const t=e.target,i=t.hasAttribute("data-md3-ripple")?t:t.closest("[data-md3-ripple]");if(!i)return;if(0!==e.button&&"mouse"===e.pointerType)return;const s=i.getBoundingClientRect(),r=2*Math.max(s.width,s.height),n=e.clientX-s.left,o=e.clientY-s.top;i.style.setProperty("--ripple-size",`${r}px`),i.style.setProperty("--ripple-x",`${n}px`),i.style.setProperty("--ripple-y",`${o}px`),i.classList.remove(p,d),i.offsetWidth,i.classList.add(p,d),i._rippleHold=!0,k=i}function g(e){const t=e.target,i=(t.hasAttribute("data-md3-ripple")?t:t.closest("[data-md3-ripple]"))||k;i&&(i._rippleHold=!1,i.classList.remove(d),setTimeout(()=>{i.classList.remove(p),k===i&&(k=null)},1e3))}function b(e){const t=e.currentTarget;t&&t._rippleHold&&(t._rippleHold=!1,t.classList.remove(d),setTimeout(()=>{t.classList.remove(p),k===t&&(k=null)},1e3))}const y=(e,t,i,s)=>{const r={hour:"12",minutes:"00",type:"24h"===t?void 0:"PM"};if(!e)return r;const n=e.value.trim();if(!i&&""===n)return r;if("boolean"==typeof i&&i){const e=new Date,[i,s]=e.toLocaleTimeString().split(":"),r=Number(i)<=9?`0${Number(i)}`:i;if(/[a-z]/i.test(s)&&"12h"===t){const[e,t]=s.split(" ");return{hour:r,minutes:e,type:t}}return{hour:r,minutes:s,type:void 0}}if("object"==typeof i){const{time:e,locales:r,preventClockType:n}=i,o=e??new Date;if(n&&s){const[e,t]=new Date(o).toLocaleTimeString().split(":");if(/[a-z]/i.test(t)){const[i,s]=t.split(" ");return{hour:e,minutes:i,type:s}}return{hour:Number(e)<=9?`0${Number(e)}`:e,minutes:t,type:void 0}}const[c,a]=new Date(o).toLocaleTimeString(r,{timeStyle:"short"}).split(":"),l=Number(c)<=9?`0${Number(c)}`:c;if(/[a-z]/i.test(a)&&"12h"===t){const[e,t]=a.split(" ");return{hour:l,minutes:e,type:t}}if("12h"===t){const[e,t]=new Date(`1970-01-01T${c}:${a}Z`).toLocaleTimeString("en-US",{timeZone:"UTC",hour12:!0,hour:"numeric",minute:"numeric"}).split(":"),[i,s]=t.split(" ");return{hour:Number(e)<=9?`0${Number(e)}`:e,minutes:i,type:s}}return{hour:l,minutes:a,type:void 0}}const[o,c]=n.split(" "),[a="",l=""]=o.split(":"),m=a.replace(/\D/g,""),h=l.replace(/\D/g,""),u={hour:m.padStart(2,"0"),minutes:h.padStart(2,"0"),type:"12h"===t?c:void 0};if(m.length>2||h.length>2)return{...u,error:"Invalid input: too many digits.",currentHour:a,currentMin:l};if(/[a-z]/i.test(o))return{...u,error:"Input contains invalid letters."};if(n.includes(" ")&&(!c||n.length>8||"AM"!==c&&"PM"!==c))return{...u,error:"Invalid AM/PM format or length.",currentLength:n.length,currentType:c};const p=Number(m),d=Number(h);if("12h"===t){if(p<1||p>12||d<0||d>59||"AM"!==c&&"PM"!==c)return{...u,error:"Invalid 12h time.",currentHour:p,currentMin:d,currentType:c}}else if(p<0||p>23||d<0||d>59)return{...u,error:"Invalid 24h time.",currentHour:p,currentMin:d};return u},M=(e,t,i)=>{const s=Number(e);if(Number.isNaN(s))return!1;switch(t){case"hour":return"24h"===i?s>=0&&s<=23:s>0&&s<=12;case"minutes":return s>=0&&s<=59;default:return}},f={amLabel:"AM",animation:!0,appendModalSelector:"",backdrop:!0,cancelLabel:"Cancel",editable:!1,enableScrollbar:!1,enableSwitchIcon:!1,mobileTimeLabel:"Enter Time",focusInputAfterCloseModal:!1,hourMobileLabel:"Hour",iconTemplate:"",iconTemplateMobile:"",incrementHours:1,incrementMinutes:1,minuteMobileLabel:"Minute",mobile:!1,okLabel:"OK",pmLabel:"PM",timeLabel:"Select time",autoSwitchToMinutes:!1,theme:"basic",clockType:"12h",disabledTime:void 0,currentTime:void 0,focusTrap:!0,delayHandler:300,inline:void 0,cssClass:void 0},T=(e,t,i,s)=>{if(e){if(Array.isArray(e)&&e.length>0){return!e.map(e=>M(e,t,i)).some(e=>!1===e)}if("string"==typeof e||"number"==typeof e){const r=M(e,t,i),n=s?.map(Number).includes(Number(e));return!(!r||n)}}},E=(e,t,i,s,r)=>{if(!(e&&t&&s&&r))return!1;const n="12h"===r?o(`${e}:${t} ${i||""}`.trim()):c(`${e}:${t}`),a=Array.isArray(s)?s:[s];for(const e of a){const[t,i]=e.trim().split("-");let s,a;if("12h"===r){const r=t.trim(),n=i.trim();if(!/\s?(AM|PM|am|pm)\s?$/.test(r)||!/\s?(AM|PM|am|pm)\s?$/.test(n)){console.warn(`Invalid 12h format in interval: "${e}". AM/PM is required for 12h clock type.`);continue}s=o(r),a=o(n)}else{const r=t.trim(),n=i.trim();if(/\s?(AM|PM|am|pm)\s?/.test(r)||/\s?(AM|PM|am|pm)\s?/.test(n)){console.warn(`Invalid 24h format in interval: "${e}". AM/PM is not allowed for 24h clock type.`);continue}s=c(r),a=c(n)}if(n>=s&&n<=a)return!1}return!0};class _{timepicker;cleanupHandlers;constructor(e,t){this.timepicker=e,this.cleanupHandlers=t}handleCancelButton=()=>{const e=()=>{const e={...y(this.timepicker.input,this.timepicker._options.clockType),hourNotAccepted:this.timepicker.hour.value,minutesNotAccepted:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:cancel",e,this.timepicker._options.onCancel),this.timepicker.emit?.("cancel",e),this.timepicker.close()()};this.timepicker.cancelButton.addEventListener("click",e),this.cleanupHandlers.push(()=>{this.timepicker.cancelButton?.removeEventListener("click",e)})};handleOkButton=()=>{const e=()=>{const{clockType:e,disabledTime:t}=this.timepicker._options,s=M(this.timepicker.hour.value,"hour",e),r=M(this.timepicker.minutes.value,"minutes",e);let n;const o=T(this.timepicker.hour.value,"hour",e,t?.hours),c=T(this.timepicker.minutes.value,"minutes",e,t?.minutes);if(t?.interval&&(n=E(this.timepicker.hour.value,this.timepicker.minutes.value,this.timepicker.activeTypeMode?.textContent||"",t.interval,e)),!1===n||!1===s||!1===r||!1===o||!1===c)return!1!==n&&r&&c||this.timepicker.minutes.classList.add("invalid-value"),void(!1!==n&&s&&o||this.timepicker.hour.classList.add("invalid-value"));this.timepicker.input.value=`${this.timepicker.hour.value}:${this.timepicker.minutes.value} ${"24h"===this.timepicker._options.clockType?"":this.timepicker.activeTypeMode?.dataset.type}`.trimEnd();const a={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:confirm",a,this.timepicker._options.onConfirm),this.timepicker.emit?.("confirm",a),this.timepicker.close()()};this.timepicker.okButton?.addEventListener("click",e),this.cleanupHandlers.push(()=>{this.timepicker.okButton?.removeEventListener("click",e)})};handleBackdropClick=()=>{const e=e=>{const s=e.target;if(!t(s,"timepicker-ui-modal"))return;const r={...y(this.timepicker.input,this.timepicker._options.clockType),hourNotAccepted:this.timepicker.hour.value,minutesNotAccepted:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:cancel",r,this.timepicker._options.onCancel),this.timepicker.emit?.("cancel",r),this.timepicker.close()()};this.timepicker.modalElement?.addEventListener("click",e),this.cleanupHandlers.push(()=>{this.timepicker.modalElement?.removeEventListener("click",e)})}}const w=(e,t)=>{if(!e)return;const i=e.querySelector(".timepicker-announcer");i&&(i.textContent="",setTimeout(()=>{i.textContent=t},100))},L=(e,t)=>{e&&e.setAttribute("aria-pressed",String(t))};class A{timepicker;cleanupHandlers;constructor(e,t){this.timepicker=e,this.cleanupHandlers=t}handleAmClick=()=>{this.timepicker._clickTouchEvents.forEach(e=>{const t=e=>{const t=e.target;t.classList.add(u),this.timepicker.PM.classList.remove(u),L(t,!0),L(this.timepicker.PM,!1),w(this.timepicker.modalElement,"AM selected"),this.timepicker.clockManager?.updateAmPm();const s={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:select-am",s,this.timepicker._options.onSelectAM),this.timepicker.emit?.("select:am",s)};this.timepicker.AM.addEventListener(e,t),this.cleanupHandlers.push(()=>{this.timepicker.AM?.removeEventListener(e,t)})})};handlePmClick=()=>{this.timepicker._clickTouchEvents.forEach(e=>{const t=e=>{const t=e.target;t.classList.add(u),this.timepicker.AM.classList.remove(u),L(t,!0),L(this.timepicker.AM,!1),w(this.timepicker.modalElement,"PM selected"),this.timepicker.clockManager?.updateAmPm();const s={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:select-pm",s,this.timepicker._options.onSelectPM),this.timepicker.emit?.("select:pm",s)};this.timepicker.PM.addEventListener(e,t),this.cleanupHandlers.push(()=>{this.timepicker.PM?.removeEventListener(e,t)})})}}class C{timepicker;cleanupHandlers;hourEventHandlers=new Map;minuteEventHandlers=new Map;constructor(e,t){this.timepicker=e,this.cleanupHandlers=t}handleClasses24h=(e,t,i=!1)=>{const s=e.target,r=e.relatedTarget;if(this.timepicker.hourTips&&"24h"===this.timepicker._options.clockType&&(Number(s.textContent)>12||0===Number(s.textContent)?this.timepicker.clockManager&&this.timepicker.clockManager.setCircleClockClasses24h():this.timepicker.clockManager&&this.timepicker.clockManager.removeCircleClockClasses24h(),this.timepicker._options.mobile||this.timepicker.tipsWrapperFor24h?.classList.remove("none")),s&&t)if(t.value=l(s.value.replace(/\D+/g,"")),i&&r){r.classList.contains("timepicker-ui-am")||r.classList.contains("timepicker-ui-pm")||t.click()}else i&&t.click()};handleHourEvents=()=>{this.hourEventHandlers.forEach((e,t)=>{this.timepicker.hour?.removeEventListener(t,e)}),this.hourEventHandlers.clear(),this.timepicker._inputEvents.forEach(e=>{const t=e=>{const t=e.target;null!==this.timepicker.clockFace&&this.timepicker.animationManager&&this.timepicker.animationManager.handleAnimationSwitchTipsMode(),"24h"===this.timepicker._options.clockType&&null!==this.timepicker.clockFace&&(Number(this.timepicker.hour.value)>12||"00"===this.timepicker.hour.value?this.timepicker.clockManager&&this.timepicker.clockManager.setCircleClockClasses24h():this.timepicker.clockManager&&this.timepicker.clockManager.removeCircleClockClasses24h(),this.timepicker._options.mobile||this.timepicker.tipsWrapperFor24h?.classList.remove("none")),this.timepicker.clockManager&&this.timepicker.clockManager.setHoursToClock(t.value),this.timepicker.minutes.classList.remove(u),this.timepicker.hour.classList.add(u);const s={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:select-hour",s,this.timepicker._options.onSelectHour),this.timepicker.emit?.("select:hour",s),null!==this.timepicker.clockFace&&this.timepicker.circle.classList.remove("small-circle")};this.timepicker.hour?.addEventListener(e,t),this.hourEventHandlers.set(e,t)});const e=e=>this.handleClasses24h(e,this.timepicker.hour,!0),t=e=>this.handleClasses24h(e,this.timepicker.hour,!1);this.timepicker.hour?.addEventListener("blur",e),this.timepicker.hour?.addEventListener("focus",t),this.hourEventHandlers.set("blur",e),this.hourEventHandlers.set("focus",t)};handleMinutesEvents=()=>{this.minuteEventHandlers.forEach((e,t)=>{this.timepicker.minutes?.removeEventListener(t,e)}),this.minuteEventHandlers.clear(),this.timepicker._inputEvents.forEach(e=>{const t=e=>{const t=e.target;null!==this.timepicker.clockFace&&(this.timepicker.animationManager&&this.timepicker.animationManager.handleAnimationSwitchTipsMode(),this.timepicker.clockManager&&this.timepicker.clockManager.setMinutesToClock(t.value)),"24h"===this.timepicker._options.clockType&&(this.timepicker.clockManager&&this.timepicker.clockManager.removeCircleClockClasses24h(),this.timepicker._options.mobile||this.timepicker.tipsWrapperFor24h?.classList.add("none")),this.timepicker.hour.classList.remove(u),this.timepicker.minutes.classList.add(u);const s={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:select-minute",s,this.timepicker._options.onSelectMinute),this.timepicker.emit?.("select:minute",s)};this.timepicker.minutes.addEventListener(e,t),this.minuteEventHandlers.set(e,t)});const e=e=>this.handleClasses24h(e,this.timepicker.minutes,!0),t=e=>this.handleClasses24h(e,this.timepicker.minutes,!1);this.timepicker.minutes?.addEventListener("blur",e),this.timepicker.minutes?.addEventListener("focus",t),this.minuteEventHandlers.set("blur",e),this.minuteEventHandlers.set("focus",t)};destroy(){this.hourEventHandlers.forEach((e,t)=>{this.timepicker.hour?.removeEventListener(t,e)}),this.hourEventHandlers.clear(),this.minuteEventHandlers.forEach((e,t)=>{this.timepicker.minutes?.removeEventListener(t,e)}),this.minuteEventHandlers.clear()}}class H{timepicker;cleanupHandlers;constructor(e,t){this.timepicker=e,this.cleanupHandlers=t}handleOpenOnClick=()=>{this.timepicker.openElement.forEach(e=>{const t=()=>this.timepicker._eventsBundle();e?.addEventListener("click",t),this.cleanupHandlers.push(()=>{e?.removeEventListener("click",t)})})};handleOpenOnEnterFocus=()=>{const e=({target:e,key:t})=>{e.disabled||"Enter"===t&&this.timepicker.open()};this.timepicker.input.addEventListener("keydown",e),this.cleanupHandlers.push(()=>{this.timepicker.input.removeEventListener("keydown",e)})};handleClickOnHourMobile=()=>{document.addEventListener("mousedown",this.timepicker._eventsClickMobileHandler),document.addEventListener("touchstart",this.timepicker._eventsClickMobileHandler),this.cleanupHandlers.push(()=>{document.removeEventListener("mousedown",this.timepicker._eventsClickMobileHandler),document.removeEventListener("touchstart",this.timepicker._eventsClickMobileHandler)})};handlerClickHourMinutes=async e=>{if(!this.timepicker.modalElement)return;const{clockType:i,editable:s}=this.timepicker._options,r=e.target,n=M(this.timepicker.hour.value,"hour",i),o=M(this.timepicker.minutes.value,"minutes",i);s&&(t(r,"timepicker-ui-hour")||t(r,"timepicker-ui-minutes")?!1!==n&&!1!==o||(o||this.timepicker.minutes.classList.add("invalid-value"),n||this.timepicker.hour?.classList.add("invalid-value")):!0===n&&!0===o&&(o&&this.timepicker.minutes.classList.remove("invalid-value"),n&&this.timepicker.hour?.classList.remove("invalid-value")))};handleIconChangeView=async()=>{if(this.timepicker._options.enableSwitchIcon&&this.timepicker.configManager){const e=e=>{e.preventDefault(),this.timepicker.configManager&&this.timepicker.configManager.toggleMobileClockFace()};this.timepicker.keyboardClockIcon?.addEventListener("click",e),this.timepicker.keyboardClockIcon?.addEventListener("touchstart",e,{passive:!1}),this.cleanupHandlers.push(()=>{this.timepicker.keyboardClockIcon?.removeEventListener("click",e),this.timepicker.keyboardClockIcon?.removeEventListener("touchstart",e)})}};handleKeyPress=e=>{if("Escape"===e.key&&this.timepicker.modalElement){const e={...y(this.timepicker.input,this.timepicker._options.clockType),hourNotAccepted:this.timepicker.hour.value,minutesNotAccepted:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:cancel",e,this.timepicker._options.onCancel),this.timepicker.emit?.("cancel",e),this.timepicker.close()()}};handleEscClick=()=>{document.addEventListener("keydown",this.handleKeyPress),this.cleanupHandlers.push(()=>{document.removeEventListener("keydown",this.handleKeyPress)})};focusTrapHandler=()=>{setTimeout(()=>{const e=this.timepicker.wrapper?.querySelectorAll('div[tabindex="0"]:not([disabled])'),i=this.timepicker.wrapper?.querySelectorAll('input[tabindex="0"]:not([disabled])');if(!e||e.length<=0||i.length<=0)return;const s=[...i,...e],r=s[0],n=s[s.length-1];this.timepicker.wrapper.focus();const o=e=>{const{key:i,shiftKey:s,target:o}=e,c=o;if("Tab"===i&&(s?document.activeElement===r&&(n.focus(),e.preventDefault()):document.activeElement===n&&(r.focus(),e.preventDefault())),"ArrowUp"===i||"ArrowDown"===i||"ArrowLeft"===i||"ArrowRight"===i){const e=t(c,"timepicker-ui-value-tips")||t(c,"timepicker-ui-value-tips-24h"),s=t(c,"timepicker-ui-hour"),r=t(c,"timepicker-ui-minutes");if(e){const e=c.parentElement,s=t(e,"timepicker-ui-minutes-time"),r=t(e,"timepicker-ui-hour-time-12")||t(e,"timepicker-ui-hour-time-24");if(s){const e=parseInt(this.timepicker.minutes.value||"0");let t=e;"ArrowUp"===i||"ArrowRight"===i?t=e>=59?0:e+1:"ArrowDown"!==i&&"ArrowLeft"!==i||(t=e<=0?59:e-1);const s=t<10?`0${t}`:`${t}`,r=this.timepicker.hour.value,n=this.timepicker.activeTypeMode?.textContent||"";if(this.timepicker._disabledTime?.value?.isInterval&&this.timepicker._disabledTime?.value?.intervals){if(!E(r,s,n,this.timepicker._disabledTime.value.intervals,this.timepicker._options.clockType))return}this.timepicker.minutes.value=s,this.timepicker.minutes.setAttribute("aria-valuenow",this.timepicker.minutes.value),this.timepicker.clockManager&&(this.timepicker.clockManager.setTransformToCircleWithSwitchesMinutes(this.timepicker.minutes.value),this.timepicker.clockManager.toggleClassActiveToValueTips(t))}else if(r){const e=parseInt(this.timepicker.hour.value||"0"),t="24h"===this.timepicker._options.clockType,s=t?23:12,r=t?0:1;let n=e;"ArrowUp"===i||"ArrowRight"===i?n=e>=s?r:e+1:"ArrowDown"!==i&&"ArrowLeft"!==i||(n=e<=r?s:e-1);const o=n<10?`0${n}`:`${n}`,c=this.timepicker.activeTypeMode?.textContent||"";if(this.timepicker._disabledTime?.value?.isInterval&&this.timepicker._disabledTime?.value?.intervals){let e=!0;for(let t=0;t<60;t++){const i=t.toString().padStart(2,"0");if(E(o,i,c,this.timepicker._disabledTime.value.intervals,this.timepicker._options.clockType)){e=!1;break}}if(e)return}this.timepicker.hour.value=o,this.timepicker.hour.setAttribute("aria-valuenow",this.timepicker.hour.value),this.timepicker.clockManager&&(this.timepicker.clockManager.setTransformToCircleWithSwitchesHour(this.timepicker.hour.value),this.timepicker.clockManager.toggleClassActiveToValueTips(n))}}if(s||r){const e=parseInt(c.value)||0,t=s,r=t?"12h"===this.timepicker._options.clockType?12:23:59,n=t&&"12h"===this.timepicker._options.clockType?1:0;let o=e;"ArrowUp"===i?o=e>=r?n:e+1:"ArrowDown"===i&&(o=e<=n?r:e-1),c.value=o<10?`0${o}`:`${o}`,c.setAttribute("aria-valuenow",c.value)}}"a"!==i&&"A"!==i||!this.timepicker.AM||t(c,"timepicker-ui-hour")||t(c,"timepicker-ui-minutes")||this.timepicker.AM.click(),"p"!==i&&"P"!==i||!this.timepicker.PM||t(c,"timepicker-ui-hour")||t(c,"timepicker-ui-minutes")||this.timepicker.PM.click(),"Enter"===i&&(t(c,"timepicker-ui-minutes")&&this.timepicker.minutes.click(),t(c,"timepicker-ui-hour")&&this.timepicker.hour.click(),t(c,"timepicker-ui-am")&&this.timepicker.AM.click(),t(c,"timepicker-ui-pm")&&this.timepicker.PM.click(),t(c,"timepicker-ui-ok-btn")&&this.timepicker.okButton.click(),t(c,"timepicker-ui-cancel-btn")&&this.timepicker.cancelButton.click(),t(c,"timepicker-ui-keyboard-icon-wrapper")&&this.timepicker.keyboardClockIcon.click())};this.timepicker.wrapper.addEventListener("keydown",o),this.cleanupHandlers.push(()=>{this.timepicker.wrapper?.removeEventListener("keydown",o)})},100)}}class S{timepicker;cleanupHandlers;constructor(e,t){this.timepicker=e,this.cleanupHandlers=t}handleInlineAutoUpdate=()=>{if(!this.timepicker._options.inline?.enabled||!1===this.timepicker._options.inline.autoUpdate)return;const e=()=>{const e=this.timepicker.hour?.value,t=this.timepicker.minutes?.value,s=this.timepicker.activeTypeMode?.textContent;if(e&&t){let r="";if("24h"===this.timepicker._options.clockType){r=`${e.padStart(2,"0")}:${t.padStart(2,"0")}`}else{r=`${e}:${t.padStart(2,"0")} ${s||"AM"}`}if(this.timepicker.input){this.timepicker.input.value=r;const n=new Event("change",{bubbles:!0});this.timepicker.input.dispatchEvent(n);const o={hour:e,minutes:t,type:s,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:confirm",o,this.timepicker._options.onConfirm),this.timepicker.emit?.("confirm",o)}}};["input","change"].forEach(t=>{const i=()=>setTimeout(e,50),s=()=>setTimeout(e,50);this.timepicker.hour?.addEventListener(t,i),this.timepicker.minutes?.addEventListener(t,s),this.cleanupHandlers.push(()=>{this.timepicker.hour?.removeEventListener(t,i),this.timepicker.minutes?.removeEventListener(t,s)})}),"24h"!==this.timepicker._options.clockType&&this.timepicker._clickTouchEvents.forEach(t=>{const i=()=>setTimeout(e,50),s=()=>setTimeout(e,50);this.timepicker.AM?.addEventListener(t,i),this.timepicker.PM?.addEventListener(t,s),this.cleanupHandlers.push(()=>{this.timepicker.AM?.removeEventListener(t,i),this.timepicker.PM?.removeEventListener(t,s)})});const t=()=>setTimeout(e,100);this.timepicker.clockFace?.addEventListener("click",t),this.cleanupHandlers.push(()=>{this.timepicker.clockFace?.removeEventListener("click",t)})}}class ${_cleanupHandlers=[];buttonHandlers;typeModeHandlers;inputHandlers;miscHandlers;inlineHandlers;constructor(e){this.buttonHandlers=new _(e,this._cleanupHandlers),this.typeModeHandlers=new A(e,this._cleanupHandlers),this.inputHandlers=new C(e,this._cleanupHandlers),this.miscHandlers=new H(e,this._cleanupHandlers),this.inlineHandlers=new S(e,this._cleanupHandlers)}destroy(){this._cleanupHandlers.forEach(e=>e()),this._cleanupHandlers=[],this.inputHandlers.destroy()}handleOpenOnClick=()=>this.miscHandlers.handleOpenOnClick();handleOpenOnEnterFocus=()=>this.miscHandlers.handleOpenOnEnterFocus();handleCancelButton=()=>this.buttonHandlers.handleCancelButton();handleOkButton=()=>this.buttonHandlers.handleOkButton();handleBackdropClick=()=>this.buttonHandlers.handleBackdropClick();handleAmClick=()=>this.typeModeHandlers.handleAmClick();handlePmClick=()=>this.typeModeHandlers.handlePmClick();handleHourEvents=()=>this.inputHandlers.handleHourEvents();handleMinutesEvents=()=>this.inputHandlers.handleMinutesEvents();handleClickOnHourMobile=()=>this.miscHandlers.handleClickOnHourMobile();handlerClickHourMinutes=e=>this.miscHandlers.handlerClickHourMinutes(e);handleIconChangeView=()=>this.miscHandlers.handleIconChangeView();handleEscClick=()=>this.miscHandlers.handleEscClick();focusTrapHandler=()=>this.miscHandlers.focusTrapHandler();handleInlineAutoUpdate=()=>this.inlineHandlers.handleInlineAutoUpdate();handleMoveHand=()=>{};handleEventToMoveHand=e=>{};get _isDragging(){return!1}get _animationFrameId(){return null}_onDragStart=e=>{};_onDragMove=e=>{};_onDragEnd=e=>{}}class x{timepicker;timeouts=[];originalOverflow;originalPaddingRight;constructor(e){this.timepicker=e}runWithTimeout(e,t=300){const i=setTimeout(e,t);this.timeouts.push(i)}clearAllTimeouts(){this.timeouts.forEach(clearTimeout),this.timeouts=[]}clearExistingModal(){const e=document.querySelector(".timepicker-ui-modal");e&&e.remove()}setModalTemplate=()=>{if(!this.timepicker._options)return;if(this.clearExistingModal(),this.timepicker._options.inline?.enabled){const e=document.getElementById(this.timepicker._options.inline.containerId);if(!e)return;e.innerHTML="",e.insertAdjacentHTML("beforeend",this.timepicker.modalTemplate);const t=e.querySelector(".timepicker-ui-modal");if(t){t.classList.add("timepicker-ui--inline");const{showButtons:e}=this.timepicker._options.inline;!1!==e&&void 0!==e||t.querySelectorAll(".timepicker-ui-wrapper-btn, .timepicker-ui-wrapper-btn.mobile").forEach(e=>e.style.display="none")}return}const{appendModalSelector:e}=this.timepicker._options;if(e){const t=document.querySelector(e);t?.insertAdjacentHTML("beforeend",this.timepicker.modalTemplate)}else document.body.insertAdjacentHTML("beforeend",this.timepicker.modalTemplate)};setScrollbarOrNot=()=>{this.timepicker._options.inline?.enabled||(this.timepicker._options.enableScrollbar?this.runWithTimeout(()=>{document.body.style.overflowY=this.originalOverflow||"",document.body.style.paddingRight=this.originalPaddingRight||""},400):(this.originalOverflow=document.body.style.overflowY,this.originalPaddingRight=document.body.style.paddingRight,document.body.style.paddingRight=`${(()=>{const e=document.createElement("div");e.className="timepicker-ui-measure",document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`,document.body.style.overflowY="hidden"))};removeBackdrop=()=>{this.timepicker._options.inline?.enabled||this.timepicker._options.backdrop||(this.timepicker.modalElement?.classList.add("removed"),this.timepicker.openElement.forEach(e=>e?.classList.add("disabled")))};setNormalizeClass=()=>{const e=this.timepicker.modalElement;if(!e)return;e.classList.add("timepicker-ui-normalize");e.querySelectorAll(":scope > div").forEach(e=>e.classList.add("timepicker-ui-normalize"))};setShowClassToBackdrop=()=>{this.timepicker._options.inline?.enabled?this.timepicker.modalElement?.classList.add("show"):this.timepicker._options.backdrop&&this.runWithTimeout(()=>{this.timepicker.modalElement?.classList.add("show")},300)};setFlexEndToFooterIfNoKeyboardIcon=()=>{!this.timepicker._options.enableSwitchIcon&&this.timepicker.footer&&(this.timepicker.footer.style.justifyContent="flex-end")};destroy(){this.clearAllTimeouts(),this.timepicker._options.inline?.enabled||(document.body.style.overflowY=this.originalOverflow||"",document.body.style.paddingRight=this.originalPaddingRight||""),this.clearExistingModal()}}const I=150,P=600,D=401;class N{timepicker;timeouts=[];constructor(e){this.timepicker=e}runWithAnimation(e,t=I){if(this.timepicker._options.animation){const i=setTimeout(e,t);this.timeouts.push(i)}else e()}clearAllTimeouts(){this.timeouts.forEach(clearTimeout),this.timeouts=[]}setAnimationToOpen(){this.clearAllTimeouts(),this.timepicker.modalElement?.classList.add("opacity"),this.runWithAnimation(()=>{this.timepicker.modalElement?.classList.add("show")})}removeAnimationToClose(){this.clearAllTimeouts(),this.timepicker.modalElement&&this.runWithAnimation(()=>{this.timepicker.modalElement?.classList.remove("show"),this.timepicker.modalElement?.classList.remove("opacity")})}handleAnimationClock(){this.timepicker._options.animation&&this.runWithAnimation(()=>{this.timepicker.clockFace?.classList.add("timepicker-ui-clock-animation");const e=setTimeout(()=>{this.timepicker.clockFace?.classList.remove("timepicker-ui-clock-animation")},P);this.timeouts.push(e)})}handleAnimationSwitchTipsMode(){const{clockHand:e}=this.timepicker;if(!e)return;e.classList.add("timepicker-ui-tips-animation");const t=setTimeout(()=>{e.classList.remove("timepicker-ui-tips-animation")},D);this.timeouts.push(t)}destroy(){this.clearAllTimeouts()}}var q='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M160-200q-33 0-56.5-23.5T80-280v-400q0-33 23.5-56.5T160-760h640q33 0 56.5 23.5T880-680v400q0 33-23.5 56.5T800-200H160Zm0-80h640v-400H160v400Zm160-40h320v-80H320v80ZM200-440h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80ZM200-560h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80ZM160-280v-400 400Z"/></svg>',F='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z"/></svg>';const O=["00","13","14","15","16","17","18","19","20","21","22","23"],V=["12","1","2","3","4","5","6","7","8","9","10","11"],W=["00","05","10","15","20","25","30","35","40","45","50","55"];class B{static angleToIndex(e,t,i){const s=Math.round(e/30)%12;if("24h"===t){if(i){const e=s+12;return 12===e?0:e}return 0===s?12:s}return 0===s?12:s}static indexToValue(e,t,i){if("24h"===t)return e.toString().padStart(2,"0");let s=e;return 0===s&&(s=12),s>12&&(s-=12),s.toString().padStart(2,"0")}static indexToAngle(e,t){if("24h"===t)return e>=12?(e-12)%12*30:e%12*30;return(0===e?12:e)%12*30}static isDisabled(e,t,i){return!!i&&(i.isInterval&&i.intervals&&i.clockType?this.isDisabledByInterval(e,t,i):!!i.hours&&i.hours.some(t=>String(t)===e||Number(t)===Number(e)||t===e))}static isDisabledByInterval(e,t,i){if(!i.intervals)return!1;for(let s=0;s<60;s++){const r=s.toString().padStart(2,"0");if(!this.isTimeInIntervals(e,r,t,i.intervals,i.clockType))return!1}return!0}static isTimeInIntervals(e,t,i,s,r){const n="12h"===r?`${e}:${t} ${i}`:`${e}:${t}`;for(const e of s){const[t,i]=e.split("-").map(e=>e.trim());if(this.isTimeBetween(n,t,i,r))return!0}return!1}static isTimeBetween(e,t,i,s){const r=this.timeToMinutes(e,s),n=this.timeToMinutes(t,s),o=this.timeToMinutes(i,s);return r>=n&&r<=o}static timeToMinutes(e,t){if("12h"===t){const t=e.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!t)return 0;let i=parseInt(t[1]);const s=parseInt(t[2]),r=t[3].toUpperCase();return"PM"===r&&12!==i&&(i+=12),"AM"===r&&12===i&&(i=0),60*i+s}{const[t,i]=e.split(":").map(Number);return 60*t+i}}static findNearestValid(e,t,i,s,r){const n="24h"===t?23:12;for(let r=0;r<=n;r++){const o=0===r?[e]:[e+r,e-r];for(const e of o){let r=e;r<0&&(r+=n+1),r>n&&(r%=n+1);const o=this.indexToValue(r,t,i);if(!this.isDisabled(o,i,s))return r}}return e}}class z{static angleToIndex(e){return Math.round(e/6)%60}static indexToValue(e){return e.toString().padStart(2,"0")}static indexToAngle(e){return e%60*6}static isDisabled(e,t,i,s,r){return!!s&&(s.isInterval&&s.intervals?this.isDisabledByInterval(e,t,i,s,r):!!s.minutes&&s.minutes.some(t=>String(t)===e||Number(t)===Number(e)||t===e))}static isDisabledByInterval(e,t,i,s,r){if(!s.intervals)return!1;const n="12h"===r?`${t}:${e} ${i}`:`${t}:${e}`;for(const e of s.intervals){const[t,i]=e.split("-").map(e=>e.trim());if(this.isTimeBetween(n,t,i,r))return!0}return!1}static isTimeBetween(e,t,i,s){const r=this.timeToMinutes(e,s),n=this.timeToMinutes(t,s),o=this.timeToMinutes(i,s);return r>=n&&r<=o}static timeToMinutes(e,t){if("12h"===t){const t=e.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!t)return 0;let i=parseInt(t[1]);const s=parseInt(t[2]),r=t[3].toUpperCase();return"PM"===r&&12!==i&&(i+=12),"AM"===r&&12===i&&(i=0),60*i+s}{const[t,i]=e.split(":").map(Number);return 60*t+i}}static findNearestValid(e,t,i,s,r){for(let n=0;n<60;n++){const o=0===n?[e]:[e+n,e-n];for(const e of o){let n=e;n<0&&(n+=60),n>=60&&(n%=60);const o=this.indexToValue(n);if(!this.isDisabled(o,t,i,s,r))return n}}return e}}class R{config;currentAngle=0;tipsCache=new Map;constructor(e){this.config=e}setHandAngle(e){Math.abs(this.currentAngle-e)<.1||(this.currentAngle=e,this.config.clockHand.style.transform=`rotateZ(${e}deg)`)}setActiveValue(e){const t=[this.config.tipsWrapper];this.config.tipsWrapperFor24h&&t.push(this.config.tipsWrapperFor24h),t.forEach(t=>{t.querySelectorAll(".timepicker-ui-value-tips, .timepicker-ui-value-tips-24h").forEach(t=>{const i=t;i.textContent===e||Number(i.textContent)===Number(e)?(i.classList.add("active"),i.setAttribute("aria-selected","true")):(i.classList.remove("active"),i.setAttribute("aria-selected","false"))})})}renderTips(e,t,i,s,r,n=!0,o,c="",a="12"){const l=o||this.config.tipsWrapper;n&&(l.innerHTML="",this.tipsCache.clear());const m=(l.offsetWidth-32)/2,h=(l.offsetHeight-32)/2,u=m-9,p=document.createDocumentFragment(),d=`${t}-${this.config.theme||"default"}`;e.forEach((n,o)=>{const l=`${d}-${n}`;let k=this.tipsCache.get(l);k||(k=this.createTip(n,t,r),this.tipsCache.set(l,k));const{wrapper:v,tip:g}=k;this.updateTipState(v,g,n,i,s,r,c,a);const b=o*(360/e.length)*(Math.PI/180);v.style.left=`${m+Math.sin(b)*u}px`,v.style.bottom=`${h+Math.cos(b)*u}px`,p.appendChild(v)}),l.appendChild(p)}createTip(e,t,i){const s=document.createElement("span"),r=document.createElement("span");r.textContent=e,r.setAttribute("role","option"),r.setAttribute("aria-selected","false"),r.tabIndex=0;const n="24h"===i&&t.includes("24")?"timepicker-ui-value-tips-24h":"timepicker-ui-value-tips";return r.classList.add(n),s.classList.add(t),this.config.theme&&(s.classList.add(this.config.theme),r.classList.add(this.config.theme)),s.appendChild(r),{wrapper:s,tip:r}}updateTipState(e,t,i,s,r,n,o,c){e.classList.remove("timepicker-ui-tips-disabled"),t.classList.remove("timepicker-ui-tips-disabled"),t.removeAttribute("aria-disabled"),t.tabIndex=0;this.checkIfDisabled(i,s,r,n,o,c)&&(e.classList.add("timepicker-ui-tips-disabled"),t.classList.add("timepicker-ui-tips-disabled"),t.setAttribute("aria-disabled","true"),t.tabIndex=-1)}checkIfDisabled(e,t,i,s,r,n){return!!i&&("hours"===t?B.isDisabled(e,r,i):"minutes"===t&&z.isDisabled(e,n,r,i,s))}setCircleSize(e){e?this.config.circle.classList.remove("small-circle"):this.config.circle.classList.add("small-circle")}setCircle24hMode(e){e?(this.config.circle.classList.add("timepicker-ui-circle-hand-24h"),this.config.clockHand.classList.add("timepicker-ui-clock-hand-24h")):(this.config.circle.classList.remove("timepicker-ui-circle-hand-24h"),this.config.clockHand.classList.remove("timepicker-ui-clock-hand-24h"))}destroy(){this.tipsCache.clear(),this.config.tipsWrapper.innerHTML=""}}class U{static normalizeAngle(e){let t=e%360;return t<0&&(t+=360),t}static calculateRawAngle(e,t){const i=e.x-t.x,s=e.y-t.y,r=180*Math.atan2(s,i)/Math.PI+90;return this.normalizeAngle(r)}static snapToIncrement(e,t){const i=Math.round(e/t)*t;return this.normalizeAngle(i)}static calculateDistance(e,t){const i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}static isInnerCircle(e,t){return e<.6*t}}class Z{static processPointerInput(e){const t=U.calculateRawAngle(e.pointerPosition,e.clockCenter);return"hours"===e.mode?this.processHours(t,e):this.processMinutes(t,e)}static processHours(e,t){const i=30*t.incrementHours,s=U.snapToIncrement(e,i),r=U.calculateDistance(t.pointerPosition,t.clockCenter),n="24h"===t.clockType&&U.isInnerCircle(r,t.clockRadius);let o=B.angleToIndex(s,t.clockType,n);const c=B.indexToValue(o,t.clockType,t.amPm),a=B.isDisabled(c,t.amPm,t.disabledTime);a&&(o=B.findNearestValid(o,t.clockType,t.amPm,t.disabledTime,n));const l=B.indexToValue(o,t.clockType,t.amPm);return{angle:B.indexToAngle(o,t.clockType),value:l,index:o,isValid:!a,isInnerCircle:"24h"===t.clockType?n:void 0}}static processMinutes(e,t){const i=6*t.incrementMinutes,s=U.snapToIncrement(e,i);let r=z.angleToIndex(s);const n=z.indexToValue(r),o=t.currentHour||"00",c=z.isDisabled(n,o,t.amPm,t.disabledTime,t.clockType);c&&(r=z.findNearestValid(r,o,t.amPm,t.disabledTime,t.clockType));const a=z.indexToValue(r);return{angle:z.indexToAngle(r),value:a,index:r,isValid:!c}}static valueToAngle(e,t,i){const s=parseInt(e,10);return"hours"===t?B.indexToAngle(s,i):z.indexToAngle(s)}}class j{state;renderer;clockType;disabledTime;incrementHours;incrementMinutes;isDragging=!1;callbacks;constructor(e,t,i,s,r=1,n=1,o={}){this.renderer=e,this.state={...t},this.clockType=i,this.disabledTime=s,this.incrementHours=r,this.incrementMinutes=n,this.callbacks=o}handlePointerMove(e,t,i){this.isDragging=!0;const s={pointerPosition:e,clockCenter:t,clockRadius:i,mode:this.state.mode,clockType:this.clockType,amPm:this.state.amPm,disabledTime:this.disabledTime,incrementHours:this.incrementHours,incrementMinutes:this.incrementMinutes,currentHour:this.state.hour},r=Z.processPointerInput(s);r.isValid&&("hours"===this.state.mode?(this.state.hour=r.value,this.state.hourAngle=r.angle,"24h"===this.clockType&&void 0!==r.isInnerCircle&&(this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(r.isInnerCircle)),this.callbacks.onHourChange&&this.callbacks.onHourChange(r.value)):(this.state.minute=r.value,this.state.minuteAngle=r.angle,this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(!1),this.callbacks.onMinuteChange&&this.callbacks.onMinuteChange(r.value)),this.renderer.setHandAngle(r.angle),this.renderer.setActiveValue(r.value))}handlePointerUp(){this.isDragging=!1}switchMode(e){if(this.state.mode===e)return;this.state.mode=e;const t="hours"===e?this.state.hourAngle:this.state.minuteAngle,i="hours"===e?this.state.hour:this.state.minute;if("hours"===e&&"24h"===this.clockType){const e=parseInt(i,10)<12;this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(e)}else this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(!1);this.renderer.setHandAngle(t),this.renderer.setActiveValue(i)}setValue(e,t){const i=Z.valueToAngle(t,e,this.clockType);if("hours"===e)if(this.state.hour=t,this.state.hourAngle=i,"24h"===this.clockType){const e=parseInt(t,10),i=0===e||e>=13;this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(i)}else this.renderer.setCircle24hMode(!1);else this.state.minute=t,this.state.minuteAngle=i,this.renderer.setCircleSize(!0),this.renderer.setCircle24hMode(!1);this.state.mode===e&&(this.renderer.setHandAngle(i),this.renderer.setActiveValue(t))}setAmPm(e){this.state.amPm=e}getState(){return{...this.state}}getHour(){return this.state.hour}getMinute(){return this.state.minute}getAmPm(){return this.state.amPm}updateDisabledTime(e){this.disabledTime=e}destroy(){this.renderer.destroy()}}class Y{controller;clockFace;isActive=!1;timepicker;constructor(e,t,i){this.controller=e,this.clockFace=t,this.timepicker=i}attach(){this.clockFace.addEventListener("mousedown",this.handlePointerDown),this.clockFace.addEventListener("touchstart",this.handlePointerDown,{passive:!1})}detach(){this.clockFace.removeEventListener("mousedown",this.handlePointerDown),this.clockFace.removeEventListener("touchstart",this.handlePointerDown),this.removeGlobalListeners()}handlePointerDown=e=>{const t=e.target;t&&t.classList&&t.classList.contains("timepicker-ui-tips-disabled")||(e.preventDefault(),this.isActive=!0,this.processPointerEvent(e),document.addEventListener("mousemove",this.handlePointerMove),document.addEventListener("touchmove",this.handlePointerMove,{passive:!1}),document.addEventListener("mouseup",this.handlePointerUp),document.addEventListener("touchend",this.handlePointerUp))};handlePointerMove=e=>{if(!this.isActive)return;const t=this.getTargetElement(e);t&&t.classList&&t.classList.contains("timepicker-ui-tips-disabled")||(e.preventDefault(),this.processPointerEvent(e))};handlePointerUp=()=>{if(!this.isActive)return;this.isActive=!1,this.controller.handlePointerUp(),this.removeGlobalListeners();const{autoSwitchToMinutes:e}=this.timepicker._options,t=this.timepicker.hour,i=this.timepicker.minutes;e&&t?.classList.contains("active")&&!this.timepicker._isMobileView&&i?.click()};processPointerEvent(e){const t=this.getPointerPosition(e),i=this.getClockCenter(),s=this.getClockRadius();this.controller.handlePointerMove(t,i,s)}getPointerPosition(e){const t=this.clockFace.getBoundingClientRect();if(e instanceof TouchEvent){const i=e.touches[0]||e.changedTouches[0];return{x:i.clientX-t.left,y:i.clientY-t.top}}return{x:e.clientX-t.left,y:e.clientY-t.top}}getTargetElement(e){if(e instanceof TouchEvent){const t=e.touches[0]||e.changedTouches[0];if(t)return document.elementFromPoint(t.clientX,t.clientY)}return e.target}getClockCenter(){return{x:this.clockFace.offsetWidth/2,y:this.clockFace.offsetHeight/2}}getClockRadius(){return this.clockFace.offsetWidth/2}removeGlobalListeners(){document.removeEventListener("mousemove",this.handlePointerMove),document.removeEventListener("touchmove",this.handlePointerMove),document.removeEventListener("mouseup",this.handlePointerUp),document.removeEventListener("touchend",this.handlePointerUp)}}class K{renderer;controller;dragHandlers;clockType;disabledTime;tipsWrapper;tipsWrapperFor24h;constructor(e){this.clockType=e.clockType,this.disabledTime=e.disabledTime,this.tipsWrapper=e.tipsWrapper,this.tipsWrapperFor24h=e.tipsWrapperFor24h;const t={clockFace:e.clockFace,tipsWrapper:e.tipsWrapper,tipsWrapperFor24h:e.tipsWrapperFor24h,clockHand:e.clockHand,circle:e.circle,theme:e.theme};this.renderer=new R(t);const i={hour:e.initialHour,minute:e.initialMinute,amPm:e.initialAmPm,hourAngle:this.calculateInitialAngle("hours",e.initialHour),minuteAngle:this.calculateInitialAngle("minutes",e.initialMinute),mode:"hours"},s={onHourChange:e.onHourChange,onMinuteChange:e.onMinuteChange};this.controller=new j(this.renderer,i,e.clockType,e.disabledTime,e.incrementHours||1,e.incrementMinutes||1,s),this.dragHandlers=new Y(this.controller,e.clockFace,e.timepicker)}initialize(){this.dragHandlers.attach(),this.switchToHours()}switchToHours(){this.controller.switchMode("hours"),"24h"===this.clockType&&this.tipsWrapperFor24h&&this.tipsWrapperFor24h.classList.remove("none"),this.renderHourTips()}switchToMinutes(){this.controller.switchMode("minutes"),this.tipsWrapperFor24h&&this.tipsWrapperFor24h.classList.add("none"),this.renderMinuteTips()}setHour(e){this.controller.setValue("hours",e)}setMinute(e){this.controller.setValue("minutes",e)}setAmPm(e){this.controller.setAmPm(e);const t=this.controller.getState();"hours"===t.mode?(this.renderHourTips(),this.renderer.setHandAngle(t.hourAngle),this.renderer.setActiveValue(t.hour)):(this.renderMinuteTips(),this.renderer.setHandAngle(t.minuteAngle),this.renderer.setActiveValue(t.minute))}getHour(){return this.controller.getHour()}getMinute(){return this.controller.getMinute()}getAmPm(){return this.controller.getAmPm()}updateDisabledTime(e){this.controller.updateDisabledTime(e);"hours"===this.controller.getState().mode?this.renderHourTips():this.renderMinuteTips()}renderHourTips(){const e=this.controller.getState().amPm;"24h"===this.clockType?(this.renderer.renderTips(V,"timepicker-ui-hour-time-12","hours",this.disabledTime,this.clockType,!0,this.tipsWrapper,e),this.tipsWrapperFor24h&&this.renderer.renderTips(O,"timepicker-ui-hour-time-24","hours",this.disabledTime,this.clockType,!0,this.tipsWrapperFor24h,e)):this.renderer.renderTips(V,"timepicker-ui-hour-time-12","hours",this.disabledTime,this.clockType,!0,void 0,e)}renderMinuteTips(){const e=this.controller.getState(),t=e.amPm,i=e.hour;this.renderer.renderTips(W,"timepicker-ui-minutes-time","minutes",this.disabledTime,this.clockType,!0,void 0,t,i)}calculateInitialAngle(e,t){const i=parseInt(t,10);return"hours"===e?i%12*30:6*i}destroy(){this.dragHandlers.detach(),this.controller.destroy()}}class X{timepicker;clockSystem=null;constructor(e){this.timepicker=e}initializeClockSystem(){if(!this.timepicker.clockFace||!this.timepicker.clockHand||!this.timepicker.circle)return;const e="24h"===this.timepicker._options.clockType;if(!this.timepicker.tipsWrapper)return;const t={clockFace:this.timepicker.clockFace,tipsWrapper:this.timepicker.tipsWrapper,tipsWrapperFor24h:e?this.timepicker.tipsWrapperFor24h:void 0,clockHand:this.timepicker.clockHand,circle:this.timepicker.circle,clockType:this.timepicker._options.clockType||"12h",disabledTime:this.convertDisabledTime(),initialHour:this.timepicker.hour?.value||"12",initialMinute:this.timepicker.minutes?.value||"00",initialAmPm:this.getAmPmValue(),theme:this.timepicker._options.theme,incrementHours:this.timepicker._options.incrementHours||1,incrementMinutes:this.timepicker._options.incrementMinutes||1,timepicker:this.timepicker,onHourChange:e=>{this.timepicker.hour&&(this.timepicker.hour.value=e)},onMinuteChange:e=>{this.timepicker.minutes&&(this.timepicker.minutes.value=e)}};this.clockSystem=new K(t),this.clockSystem.initialize()}convertDisabledTime(){if(!this.timepicker._disabledTime?.value)return null;const e=this.timepicker._disabledTime.value;let t;return e.intervals&&(t=Array.isArray(e.intervals)?e.intervals:[e.intervals]),{hours:e.hours,minutes:e.minutes,isInterval:e.isInterval,intervals:t,clockType:e.clockType}}getAmPmValue(){if("24h"===this.timepicker._options.clockType)return"";const e=this.timepicker.activeTypeMode;if(e){const t=e.textContent?.trim();if("AM"===t||"PM"===t)return t}return this.timepicker.AM?.classList.contains("active")?"AM":"PM"}destroyClockSystem(){this.clockSystem&&(this.clockSystem.destroy(),this.clockSystem=null)}removeCircleClockClasses24h(){this.timepicker.circle?.classList.remove("timepicker-ui-circle-hand-24h"),this.timepicker.clockHand?.classList.remove("timepicker-ui-clock-hand-24h")}setCircleClockClasses24h(){this.timepicker.circle&&this.timepicker.circle?.classList.add("timepicker-ui-circle-hand-24h"),this.timepicker.clockHand&&this.timepicker.clockHand?.classList.add("timepicker-ui-clock-hand-24h")}setOnStartCSSClassesIfClockType24h(){if("24h"===this.timepicker._options.clockType){const e=this.timepicker?.configManager?.getInputValue(this.timepicker.input,this.timepicker._options.clockType,this.timepicker._options.currentTime);let t=e?.hour;this.timepicker.input.value.length>0&&(t=this.timepicker.input.value.split(":")[0]),(Number(t)>12||0===Number(t))&&this.setCircleClockClasses24h()}}setBgColorToCircleWithMinutesTips=()=>{if(this.timepicker.minutes.value&&W.includes(this.timepicker.minutes.value)){const e=getComputedStyle(this.timepicker.circle).getPropertyValue("--timepicker-primary").trim();e&&(this.timepicker.circle.style.backgroundColor=e),this.timepicker.circle.classList.remove("small-circle")}};removeBgColorToCirleWithMinutesTips=()=>{this.timepicker.minutes.value&&W.includes(this.timepicker.minutes.value)||(this.timepicker.circle.style.backgroundColor="",this.timepicker.circle.classList.add("small-circle"))};setClassActiveToHourOnOpen=()=>{this.timepicker._options.mobile||this.timepicker._isMobileView||this.timepicker.hour?.classList.add(u)};setMinutesToClock=e=>{this.clockSystem&&(this.removeBgColorToCirleWithMinutesTips(),this.clockSystem.switchToMinutes(),e&&this.clockSystem.setMinute(e))};setHoursToClock=e=>{this.clockSystem&&(this.clockSystem.switchToHours(),e&&this.clockSystem.setHour(e))};setTransformToCircleWithSwitchesHour=e=>{this.clockSystem&&e&&this.clockSystem.setHour(e)};setTransformToCircleWithSwitchesMinutes=e=>{this.clockSystem&&e&&this.clockSystem.setMinute(e)};updateAmPm=()=>{if(!this.clockSystem||"24h"===this.timepicker._options.clockType)return;const e=this.getAmPmValue();""!==e&&this.clockSystem.setAmPm(e)};toggleClassActiveToValueTips=e=>{if(this.clockSystem)return;const t=this.timepicker.allValueTips.find(t=>Number(t.innerText)===Number(e));this.timepicker.allValueTips.map(e=>{e.classList.remove(u),e.setAttribute("aria-selected","false")}),void 0!==t&&(t.classList.add(u),t.setAttribute("aria-selected","true"))}}class G extends Error{code;constructor(e,t){super(`[TimepickerUI] ${e}`),this.code=t,this.name="TimepickerError",Object.setPrototypeOf(this,G.prototype)}}const J="INVALID_PARAMETER";class Q{timepicker;constructor(e){this.timepicker=e}setErrorHandler(){const e=this.timepicker.input;if(!e)return;const{error:t,currentHour:s,currentMin:r,currentType:n,currentLength:o}=y(e,this.timepicker._options.clockType);if(this.removeErrorHandler(),t){const c=document.createElement("div");c.classList.add("timepicker-ui-invalid-text"),c.innerHTML="<b>Invalid Time Format</b>",e.classList.add("timepicker-ui-invalid-format"),e.nextElementSibling?.classList.contains("timepicker-ui-invalid-text")||e.after(c);const a={error:t,currentHour:s,currentMin:r,currentType:n,currentLength:o};return i(this.timepicker._element,"timepicker:error",a,this.timepicker._options.onError),this.timepicker.emit?.("error",a),!1}return!0}removeErrorHandler(){const e=this.timepicker.input;if(!e)return;e.classList.remove("timepicker-ui-invalid-format");const t=e.nextElementSibling;t?.classList.contains("timepicker-ui-invalid-text")&&t.remove()}checkDisabledValuesOnStart(){if(!this.timepicker._options.disabledTime)return;const{disabledTime:e,clockType:t}=this.timepicker._options;if(e.interval){if(!t)throw new G("clockType is required when using disabledTime.interval",J);const i=Array.isArray(e.interval)?e.interval:[e.interval];try{a(i,t)}catch(e){throw new G(`Invalid disabledTime.interval: ${e.message}`,J)}return}const{hours:i,minutes:s}=e,r=!i||T(i,"hour",t),n=!s||T(s,"minutes",t);if(!r||!n)throw new G("Invalid hours or minutes in disabledTime option",J)}destroy(){this.removeErrorHandler()}}const ee={crane:["crane"],"crane-straight":["crane-straight"],m2:["m2"],"m3-green":["m3-green"],dark:["dark"],glassmorphic:["glassmorphic"],pastel:["pastel"],ai:["ai"],cyberpunk:["cyberpunk"],custom:["custom"]};class te{timepicker;constructor(e){this.timepicker=e}setTheme=()=>{const e=this.timepicker.modalElement;if(!e||!this.timepicker._options)return;const{theme:t}=this.timepicker._options;if(!t||!ee[t])return;e.querySelectorAll("input, div").forEach(e=>{Object.values(ee).forEach(t=>e.classList.remove(...t)),e.classList.add(...ee[t])})};setInputClassToInputElement=()=>{const e=this.timepicker.input;e&&(t(e,"timepicker-ui-input")||e.classList.add("timepicker-ui-input"))};setDataOpenToInputIfDoesntExistInWrapper=()=>{null===this.timepicker.openElementData&&this.timepicker.input&&this.timepicker.input.setAttribute("data-open","timepicker-ui-input")};setClassTopOpenElement=()=>{for(const e of this.timepicker.openElement)e&&e.classList.add("timepicker-ui-open-element")};setTimepickerClassToElement=()=>{const e=this.timepicker._element;if(!e)return;e.classList.add(m);const t=this.timepicker._options?.cssClass;t&&t!==m&&e.classList.add(t)};destroy(){const e=this.timepicker.modalElement;if(!e)return;e.querySelectorAll("input, div").forEach(e=>{Object.values(ee).forEach(t=>e.classList.remove(...t))})}}class ie{timeouts=[];animationFrame;runWithTimeout(e,t){const i=setTimeout(e,t);this.timeouts.push(i)}clearAll(){this.timeouts.forEach(clearTimeout),this.timeouts=[],this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}setAnimationFrame(e){this.animationFrame=e}}class se{timepicker;constructor(e){this.timepicker=e}updateIconAndLabel(e,t,i){if(t&&(t.textContent=i?this.timepicker._options.mobileTimeLabel||"Enter Time":this.timepicker._options.timeLabel||"Select time"),e){const t=e.querySelector(".timepicker-ui-keyboard-icon");t&&(t.innerHTML=i?this.timepicker._options.iconTemplateMobile||F:this.timepicker._options.iconTemplate||q)}}toggleViewClasses(e){const t=e?"add":"remove";this.timepicker.inputWrappers?.forEach(e=>e.classList[t]("mobile")),this.timepicker.minutesText.classList[t]("show"),this.timepicker.dots.classList[t]("mobile"),this.timepicker.hourText.classList[t]("show"),this.timepicker.header.classList[t]("show")}updateReadonlyState(e,t,i){i?(e?.removeAttribute("readonly"),t?.removeAttribute("readonly")):this.timepicker._options.editable||(e?.setAttribute("readonly",""),t?.setAttribute("readonly",""))}switchView(e,t,i,s,r){this.timepicker._isMobileView=r,this.toggleViewClasses(r),this.updateIconAndLabel(t,e,r),this.updateReadonlyState(i,s,r)}}class re{timepicker;timeoutManager;viewSwitcher;isAnimating=!1;constructor(e,t,i){this.timepicker=e,this.timeoutManager=t,this.viewSwitcher=i}collapseClockFace(e,t,i,s,r,n,o){this.isAnimating=!0,this.viewSwitcher.switchView(r,s,n,o,!0),i?.forEach(i=>{i!==t&&i!==e&&i!==r&&(i.classList.remove("expanded"),i.classList.add("mobile"))}),r&&(r.classList.remove("expanded"),r.classList.add("mobile")),requestAnimationFrame(()=>{t?.classList.remove("expanded"),t?.classList.add("mobile"),e?.classList.remove("expanded"),e?.classList.add("mobile"),this.timepicker.clockFace?.classList.remove("scale-in"),this.timeoutManager.runWithTimeout(()=>{this.isAnimating=!1},450)}),s?.setAttribute("aria-label","Show clock face"),s?.setAttribute("aria-pressed","false")}expandClockFace(e,t,i,s,r,n,o){this.isAnimating=!0;if(!e.hasAttribute("data-clock-initialized")&&(e.setAttribute("data-clock-initialized","true"),this.timepicker.clockFace?.classList.remove("scale-in")),this.timepicker.clockManager){const e=this.timepicker.modalElement?.querySelector(".timepicker-ui-minutes"),t=e?.classList.contains("active");t&&e?this.timepicker.clockManager.setMinutesToClock(e.value):n&&this.timepicker.clockManager.setHoursToClock(n.value),this.timepicker.eventManager&&this.timepicker.eventManager.handleMoveHand()}i?.forEach(i=>{i!==t&&i!==e&&i!==r&&(i.classList.remove("mobile"),i.classList.add("expanded"))}),r&&(r.classList.remove("mobile"),r.classList.add("expanded")),this.viewSwitcher.switchView(r,s,n,o,!1),requestAnimationFrame(()=>{e.classList.remove("mobile"),e.classList.add("expanded"),requestAnimationFrame(()=>{t&&(t.classList.remove("mobile"),t.classList.add("expanded")),this.timeoutManager.runWithTimeout(()=>{this.timepicker.clockFace?.classList.add("scale-in")},150),this.timeoutManager.runWithTimeout(()=>{this.isAnimating=!1},450)})}),s?.setAttribute("aria-label","Hide clock face"),s?.setAttribute("aria-pressed","true")}toggle(){if(this.isAnimating)return;const e=this.timepicker.modalElement?.querySelector(".timepicker-ui-wrapper"),t=this.timepicker.keyboardClockIcon,i=this.timepicker.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper"),s=this.timepicker.modalElement?.querySelectorAll("*"),r=this.timepicker.modalElement?.querySelector(".timepicker-ui-select-time"),n=this.timepicker.hour,o=this.timepicker.minutes;if(!e)return;e.classList.contains("expanded")?this.collapseClockFace(e,i,s,t,r,n,o):this.expandClockFace(e,i,s,t,r,n,o)}}class ne{timepicker;constructor(e){this.timepicker=e}isCurrentTimeEnabled(e){const t=this.timepicker._options?.currentTime;return"boolean"==typeof t?t:!!t?.[e]}preventClockTypeByCurrentTime(){if(!this.isCurrentTimeEnabled("preventClockType"))return;const{currentTime:e,clockType:t}=this.timepicker._options,{type:i}=y(this.timepicker.input,t,e,!0);this.timepicker._options.clockType=i?"12h":"24h"}updateInputValueWithCurrentTimeOnStart(){if(!this.isCurrentTimeEnabled("updateInput"))return;const{hour:e,minutes:t,type:i}=y(this.timepicker.input,this.timepicker._options.clockType,this.timepicker._options.currentTime);this.timepicker.input.value=i?`${e}:${t} ${i}`:`${e}:${t}`}checkMobileOption(){this.timepicker._isMobileView=!!this.timepicker._options.mobile,this.timepicker._options.mobile&&(this.timepicker._options.editable=!0)}getDisableTime(){const e=(e=>{if(!e)return;const{disabledTime:t,clockType:i}=e;if(!t||Object.keys(t).length<=0||"Object"!==t.constructor.name)return;const{hours:n,minutes:o,interval:c}=t;if(c){delete t.hours,delete t.minutes;const e=Array.isArray(c)?c:[c];if(!i)throw new Error("clockType is required when using disabledTime.interval");try{a(e,i)}catch(e){throw e}return{value:e.map(e=>{const[t,n]=e.trim().split("-"),{hour:o,minutes:c,type:a}=y({value:t.trim()},i),{hour:l,minutes:m,type:h}=y({value:n.trim()},i);let u=s(o,l).map(e=>"00"===e||0===Number(e)?`0${Number(e)}`:`${Number(e)}`);const p=[],d=Number(c),k=Number(m);if(h===a)return d>0&&k<=0?(p.push(u[0],u[u.length-1]),u=u.slice(1,-1)):k<59&&k>0&&d<=0?(p.push(void 0,u[u.length-1]),u=u.slice(0,-1)):k>0&&d>0?(p.push(u[0],u[u.length-1]),u=u.slice(1,-1)):0===k&&0===d&&(p.push(void 0,u[u.length-1]),u.pop()),{removedStartedHour:void 0!==p[0]&&Number(p[0])<=9?`0${p[0]}`:p[0],removedEndHour:void 0!==p[1]&&Number(p[1])<=9?`0${p[1]}`:p[1],rangeArrHour:u,startMinutes:s(c,59).map(e=>Number(e)<=9?`0${e}`:`${e}`),endMinutes:r(0,m).map(e=>Number(e)<=9?`0${e}`:`${e}`),startType:a,endType:h};{const e=s(o,12).map(String),t=r(1,l).map(String),i=[],n=[];return d>0&&k<=0?(n.push(t[t.length-1]),i.push(e[0]),t.pop(),e.shift()):k<59&&k>0&&d<=0?(i.push(e[0]),n.push(t[t.length-1]),t.pop()):k>0&&d>0?(n.push(t[t.length-1]),i.push(e[0]),t.pop(),e.shift()):0===k&&0===d&&(n.push(t[t.length-1]),i.push(e[0]),t.pop()),{startType:a,endType:h,amHours:e,pmHours:t,removedAmHour:i[0]&&Number(i[0])<=9?`0${i[0]}`:i[0],removedPmHour:n[0]&&Number(n[0])<=9?`0${n[0]}`:n[0],startMinutes:0===Number(c)?[]:s(c,59).map(e=>Number(e)<=9?`0${e}`:`${e}`),endMinutes:r(0,m).map(e=>Number(e)<=9?`0${e}`:`${e}`)}}}).reduce((e,t)=>(Object.entries(t).forEach(([t,i])=>{Array.isArray(i)?e[t]=Array.isArray(e[t])?[...e[t],...i]:[...i]:e[t]=i}),e),{isInterval:!0,clockType:i,intervals:e})}}return n?.forEach(e=>{if("12h"===i&&Number(e)>12)throw new Error("The disabled hours value has to be less than 13");if("24h"===i&&Number(e)>23)throw new Error("The disabled hours value has to be less than 24")}),o?.forEach(e=>{if(Number(e)>59)throw new Error("The disabled minutes value has to be less than 60")}),{value:{hours:n?.map(e=>"00"===e||0===Number(e)?`0${Number(e)}`:`${Number(e)}`),minutes:o?.map(e=>Number(e)<=9?`0${e}`:`${e}`)}}})(this.timepicker._options);this.timepicker._disabledTime=e||null}getInputValueOnOpenAndSet(){const e=y(this.timepicker.input,this.timepicker._options.clockType,this.timepicker._options.currentTime);if(void 0===e){this.timepicker.hour.value="12",this.timepicker.minutes.value="00";const e={hour:this.timepicker.hour.value,minutes:this.timepicker.minutes.value,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};return i(this.timepicker._element,"timepicker:open",e,this.timepicker._options.onOpen),this.timepicker.emit?.("open",e),void("24h"!==this.timepicker._options.clockType&&this.timepicker.AM.classList.add(u))}let[t,s,r]=this.timepicker.input.value.split(":").join(" ").split(" ");0===this.timepicker.input.value.length&&(t=e.hour,s=e.minutes,r=e.type),this.timepicker.hour.value=t,this.timepicker.minutes.value=s;const n=this.timepicker.modalElement?.querySelector(`[data-type='${r}']`);"24h"!==this.timepicker._options.clockType&&n&&n.classList.add(u);const o={...e,type:this.timepicker.activeTypeMode?.dataset.type,degreesHours:this.timepicker._degreesHours,degreesMinutes:this.timepicker._degreesMinutes};i(this.timepicker._element,"timepicker:open",o,this.timepicker._options.onOpen),this.timepicker.emit?.("open",o)}}class oe{timepicker;debouncedHandler;timeoutManager;viewSwitcher;mobileToggler;initManager;constructor(e){this.timepicker=e,this.timeoutManager=new ie,this.viewSwitcher=new se(e),this.mobileToggler=new re(e,this.timeoutManager,this.viewSwitcher),this.initManager=new ne(e)}preventClockTypeByCurrentTime=()=>{this.initManager.preventClockTypeByCurrentTime()};updateInputValueWithCurrentTimeOnStart=()=>{this.initManager.updateInputValueWithCurrentTimeOnStart()};checkMobileOption(){this.initManager.checkMobileOption()}getDisableTime(){this.initManager.getDisableTime()}getInputValueOnOpenAndSet=()=>{this.initManager.getInputValueOnOpenAndSet()};toggleMobileClockFace=()=>{this.mobileToggler.toggle()};getInputValue=y;destroy(){this.timeoutManager.clearAll(),this.debouncedHandler&&"cancel"in this.debouncedHandler&&this.debouncedHandler.cancel?.()}}class ce{events=new Map;on(e,t){this.events.has(e)||this.events.set(e,new Set),this.events.get(e).add(t)}once(e,t){const i=s=>{t(s),this.off(e,i)};this.on(e,i)}off(e,t){t?this.events.get(e)?.delete(t):this.events.delete(e)}emit(e,t){this.events.get(e)?.forEach(e=>{e(t)})}clear(){this.events.clear()}hasListeners(e){return(this.events.get(e)?.size??0)>0}}class ae{updates=[];rafId=null;schedule(e){this.updates.push(e),this.rafId||(this.rafId=requestAnimationFrame(()=>this.flush()))}flush(){this.updates.forEach(e=>e()),this.updates=[],this.rafId=null}destroy(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.updates=[]}}class le{_degreesHours=null;_degreesMinutes=null;_options;_eventsClickMobile=()=>Promise.resolve();_eventsClickMobileHandler=()=>{};_mutliEventsMove=()=>{};_mutliEventsMoveHandler;_clickTouchEvents;_element;_instanceId;_isMobileView;_isTouchMouseMove;_disabledTime;_cloned;_inputEvents;_isModalRemove;_isInitialized=!1;_customId;_eventHandlersRegistered=!1;_isDestroyed=!1;_pendingThemeConfig;eventManager;modalManager;animationManager;clockManager;validationManager;themeManager;configManager;domBatcher;_eventEmitter;constructor(t,i){if("undefined"==typeof window)return void(this._isDestroyed=!0);let s=null;try{s=this._resolveInputElement(t)}catch(e){return void(this._isDestroyed=!0)}if(!s)return void(this._isDestroyed=!0);this._eventEmitter=new ce,this.domBatcher=new ae;const r=i?.id;this._customId=r,this._instanceId=r||`timepicker-ui-${"undefined"!=typeof window&&window.crypto&&"function"==typeof window.crypto.randomUUID?window.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}`,this._element=this._createWrapperElement(s),this._cloned=null;const n=(e=>{if(!e)return;const t=JSON.parse(JSON.stringify(e)),i=Object.keys(t);return Object.values(t).reduce((e,t,s)=>(Number(t)?e[i[s]]=Number(t):"true"===t||"false"===t?e[i[s]]=JSON.parse(t):"string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||(e[i[s]]=t),e),{})})(this._element?.dataset);if(this._options={...e({...f,...i,...n},f)},this._options.inline?.enabled&&void 0===i?.focusTrap&&(this._options.focusTrap=!1),this._isTouchMouseMove=!1,this._degreesHours=30*Number(y(this._element?.querySelector("input"),this._options.clockType).hour),this._degreesMinutes=6*Number(y(this._element?.querySelector("input"),this._options.clockType).minutes),this._isMobileView=!1,this._mutliEventsMove=e=>this.eventManager.handleEventToMoveHand(e),this._mutliEventsMoveHandler=this._mutliEventsMove.bind(this),this._eventsClickMobile=e=>this.eventManager.handlerClickHourMinutes(e),this._eventsClickMobileHandler=this._eventsClickMobile.bind(this),this.eventManager=new $(this),this.modalManager=new x(this),this.animationManager=new N(this),this.clockManager=new X(this),this.validationManager=new Q(this),this.themeManager=new te(this),this.configManager=new oe(this),this.configManager.checkMobileOption(),this._clickTouchEvents=["click","mousedown","touchstart"],this._inputEvents=["change",...this._clickTouchEvents],this._disabledTime=null,this.configManager.preventClockTypeByCurrentTime(),this._isModalRemove=!0,this._isInitialized=!1,this._options.inline?.enabled){if(!this._options.inline.containerId)return void(this._isDestroyed=!0);if(!document.getElementById(this._options.inline.containerId))return void(this._isDestroyed=!0)}}get modalTemplate(){return((e,t)=>{const{iconTemplate:i,timeLabel:s,mobileTimeLabel:r,amLabel:n,pmLabel:o,cancelLabel:c,okLabel:a,iconTemplateMobile:l,minuteMobileLabel:m,hourMobileLabel:h,enableSwitchIcon:u,animation:p,clockType:d,editable:k,theme:v,mobile:g}=e,b=g?"mobile":"";return`\n\n  <div class="timepicker-ui-modal normalize ${b} ${v}" role="dialog" aria-modal="true" aria-labelledby="timepicker-ui-label-${t}" data-owner-id="${t}" style='transition:${p?"opacity 0.15s linear":"none"}'>\n    <div class="timepicker-ui-wrapper ${b}" tabindex="0">\n      <div class="timepicker-ui-select-time ${b}" id="timepicker-ui-label-${t}">${b?r:s}</div>\n      <div class="timepicker-ui-header ${b}">\n        <div class="timepicker-ui-wrapper-time ${b} ${"24h"===d?"timepicker-ui-wrapper-time-24h":""}" role="group" aria-label="${b?r:s}">\n          <div class="timepicker-ui-input-wrapper ${b}">\n            <div class="timepicker-ui-input-ripple-wrapper ${b}" data-md3-ripple>\n              <input name="hour" ${k||b?"":"readonly"} class="timepicker-ui-hour ${b}" tabindex="0" type="number" min="0" max="${"12h"===d?"12":"23"}" aria-label="${b?h:"Hour"}" role="spinbutton" aria-valuenow="12" />\n            </div>\n            <div class="timepicker-ui-hour-text ${b}">${h}</div>\n          </div>\n          <div class="timepicker-ui-dots ${b}" aria-hidden="true">  \n            <span></span>\n            <span></span>\n          </div>    \n          <div class="timepicker-ui-input-wrapper ${b}">\n            <div class="timepicker-ui-input-ripple-wrapper ${b}" data-md3-ripple>\n              <input name="minutes" ${k||b?"":"readonly"} class="timepicker-ui-minutes ${b}" tabindex="0" type="number" min="0" max="59" aria-label="${b?m:"Minute"}" role="spinbutton" aria-valuenow="0" />\n            </div>\n            <div class="timepicker-ui-minute-text ${b}">${m}</div>\n          </div>\n        </div>\n        ${"24h"!==d?`\n        <div class="timepicker-ui-wrapper-type-time ${b}" role="group" aria-label="Time period">\n          <div class="timepicker-ui-type-mode timepicker-ui-am ${b?"mobile":"timepicker-ui-ripple"}" data-md3-ripple tabindex="0" role="button" aria-label="${n}" aria-pressed="false" data-type="AM">${n}</div>    \n          <div class="timepicker-ui-type-mode timepicker-ui-pm ${b?"mobile":"timepicker-ui-ripple"}" data-md3-ripple tabindex="0" role="button" aria-label="${o}" aria-pressed="false" data-type="PM">${o}</div>    \n        </div>\n        `:""}\n      </div>\n      <div class="timepicker-ui-mobile-clock-wrapper ${b}">\n        <div class="timepicker-ui-body ${b}">\n          <div class="timepicker-ui-clock-face ${b}" role="group" aria-label="Clock face">\n            <div class="timepicker-ui-dot ${b}" aria-hidden="true"></div>\n            <div class="timepicker-ui-clock-hand ${b}" aria-hidden="true">\n              <div class="timepicker-ui-circle-hand ${b}"></div>\n            </div>\n            <div class="timepicker-ui-tips-wrapper ${b}" role="listbox" aria-label="Time values"></div>\n            ${"24h"===d?`<div class="timepicker-ui-tips-wrapper-24h ${b}" role="listbox" aria-label="24-hour time values"></div>`:""}\n          </div>\n        </div>\n      </div>\n      <div class="timepicker-ui-footer ${b}" ${b?'data-view="mobile"':""}>\n        ${u?`\n        <div class="timepicker-ui-keyboard-icon-wrapper ${b}" tabindex="0" role="button" aria-pressed="false" aria-label="Toggle keyboard mode" data-view="desktop">\n          ${b?l||`<button aria-label="Toggle clock" type="button" class="timepicker-ui-keyboard-icon">${l||F}</button>`:`<button aria-label="Toggle keyboard" type="button" class="timepicker-ui-keyboard-icon">${i||q}</button>`}\n        </div>`:""}\n        <div class="timepicker-ui-wrapper-btn ${b}">\n          <div class="timepicker-ui-cancel-btn ${b}" data-md3-ripple tabindex="0" role="button" aria-pressed="false" aria-label="${c}">${c}</div>\n          <div class="timepicker-ui-ok-btn ${b}" data-md3-ripple tabindex="0" role="button" aria-pressed="false" aria-label="${a}">${a}</div>\n        </div>\n      </div>\n    </div>\n    <div class="timepicker-announcer sr-only" role="status" aria-live="polite" aria-atomic="true"></div>  \n  </div>`})(this._options,this._instanceId)}get modalElement(){return document.querySelector(`[data-owner-id="${this._instanceId}"]`)}get clockFace(){return this._isMobileView?this.modalElement?.querySelector(".timepicker-ui-clock-face.mobile"):this.modalElement?.querySelector(".timepicker-ui-clock-face:not(.mobile)")}get input(){return this._element?.querySelector("input")}get clockHand(){return this._isMobileView?this.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper .timepicker-ui-clock-hand"):this.modalElement?.querySelector(".timepicker-ui-clock-hand:not(.mobile)")}get circle(){return this._isMobileView?this.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper .timepicker-ui-circle-hand"):this.modalElement?.querySelector(".timepicker-ui-circle-hand:not(.mobile)")}get tipsWrapper(){return this._isMobileView?this.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper .timepicker-ui-tips-wrapper"):this.modalElement?.querySelector(".timepicker-ui-tips-wrapper:not(.mobile)")}get tipsWrapperFor24h(){return this._isMobileView?this.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper .timepicker-ui-tips-wrapper-24h"):this.modalElement?.querySelector(".timepicker-ui-tips-wrapper-24h:not(.mobile)")}get minutes(){return this.modalElement?.querySelector(".timepicker-ui-minutes")}get hour(){return this.modalElement?.querySelector(".timepicker-ui-hour")}get AM(){return this.modalElement?.querySelector(".timepicker-ui-am")}get PM(){return this.modalElement?.querySelector(".timepicker-ui-pm")}get hourText(){return this.modalElement?.querySelector(".timepicker-ui-hour-text")}get minutesText(){return this.modalElement?.querySelector(".timepicker-ui-minute-text")}get header(){return this.modalElement?.querySelector(".timepicker-ui-header")}get inputWrappers(){return this.modalElement?.querySelectorAll(".timepicker-ui-input-wrapper")}get dots(){return this.modalElement?.querySelector(".timepicker-ui-dots")}get minutesTips(){return this.modalElement?.querySelector(".timepicker-ui-minutes-time")}get hourTips(){return this.modalElement?.querySelector(".timepicker-ui-hour-time-12")}get allValueTips(){const e=this.modalElement;return e?[...e.querySelectorAll(".timepicker-ui-value-tips"),...e.querySelectorAll(".timepicker-ui-value-tips-24h")]:[]}get openElementData(){const e=this._element?.querySelectorAll("[data-open]");if(e?.length>0){const t=[];return e.forEach(({dataset:e})=>t.push(e.open??"")),[...new Set(t)]}return null}get openElement(){return null===this.openElementData?(this.input?.setAttribute("data-open","timepicker-ui-input"),[this.input]):this.openElementData.map(e=>this._element?.querySelectorAll(`[data-open='${e}']`))[0]??""}get cancelButton(){return this.modalElement?.querySelector(".timepicker-ui-cancel-btn")}get okButton(){return this.modalElement?.querySelector(".timepicker-ui-ok-btn")}get activeTypeMode(){return this.modalElement?.querySelector(".timepicker-ui-type-mode.active")}get keyboardClockIcon(){return this.modalElement?.querySelector(".timepicker-ui-keyboard-icon-wrapper")}get footer(){return this.modalElement?.querySelector(".timepicker-ui-footer")}get wrapper(){return this.modalElement?.querySelector(".timepicker-ui-wrapper")}getElement(){return this._element}on(e,t){this._isDestroyed||this._eventEmitter.on(e,t)}once(e,t){this._isDestroyed||this._eventEmitter.once(e,t)}off(e,t){this._isDestroyed||this._eventEmitter.off(e,t)}emit(e,t){this._eventEmitter.emit(e,t)}_applyThemeToWrapper(e){if(!this._pendingThemeConfig)return;const t={primaryColor:"--timepicker-primary",backgroundColor:"--timepicker-bg",surfaceColor:"--timepicker-surface",surfaceHoverColor:"--timepicker-surface-hover",textColor:"--timepicker-text",secondaryTextColor:"--timepicker-secondary-text",disabledTextColor:"--timepicker-disabled-text",onPrimaryColor:"--timepicker-on-primary",borderColor:"--timepicker-border",shadow:"--timepicker-shadow",borderRadius:"--timepicker-border-radius",fontFamily:"--timepicker-font-family"};Object.entries(this._pendingThemeConfig).forEach(([i,s])=>{s&&t[i]&&e.style.setProperty(t[i],s)})}_resolveInputElement(e){let t=null;if("string"==typeof e){if(t=document.querySelector(e),!t)return null}else{if(!(e instanceof HTMLElement))return null;t=e}if("INPUT"===t.tagName)return t;return t.querySelector("input")}_createWrapperElement(e){const t=e.parentElement;if("INPUT"===e.tagName&&!t?.classList.contains("timepicker-ui")){const t=document.createElement("div");return t.className="timepicker-ui",e.parentNode?.insertBefore(t,e),t.appendChild(e),t}return t&&!t.classList.contains("timepicker-ui")&&t.classList.add("timepicker-ui"),t||e}}class me extends le{create=()=>{if(!this._isDestroyed&&!this._isInitialized){try{this.configManager.updateInputValueWithCurrentTimeOnStart(),this.validationManager.checkDisabledValuesOnStart()}catch(e){return void(this._isDestroyed=!0)}this.themeManager.setTimepickerClassToElement(),this.themeManager.setInputClassToInputElement(),this.themeManager.setDataOpenToInputIfDoesntExistInWrapper(),this.themeManager.setClassTopOpenElement(),this._options.inline?.enabled?(this.eventManager.handleOpenOnEnterFocus(),this._eventsBundle()):(this.eventManager.handleOpenOnEnterFocus(),this.eventManager.handleOpenOnClick()),this.configManager.getDisableTime(),this._isInitialized=!0}};open=e=>{this._isDestroyed||(this._isInitialized||this.create(),this._eventsBundle(),n(e))};close=()=>((e,t)=>{let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{e(...s)},t)}})((...e)=>{if(e.length>2||!this.modalElement)return;const[t]=e.filter(e=>"boolean"==typeof e),[i]=e.filter(e=>"function"==typeof e);this._isMobileView=!!this._options.mobile,t&&(this.eventManager.handleOkButton(),this.okButton?.click()),this._isTouchMouseMove=!1,document.removeEventListener("mousedown",this.eventManager._onDragStart,!1),document.removeEventListener("touchstart",this.eventManager._onDragStart),document.removeEventListener("mousemove",this.eventManager._onDragMove,!1),document.removeEventListener("mouseup",this.eventManager._onDragEnd,!1),document.removeEventListener("touchmove",this.eventManager._onDragMove),document.removeEventListener("touchend",this.eventManager._onDragEnd,!1),document.removeEventListener("mouseleave",this.eventManager._onDragEnd,!1),document.removeEventListener("mousedown",this._eventsClickMobileHandler),document.removeEventListener("touchstart",this._eventsClickMobileHandler),document.removeEventListener("keypress",this.eventManager.handleEscClick),this.wrapper.removeEventListener("keydown",this.eventManager.focusTrapHandler),this.animationManager.removeAnimationToClose(),this.openElement.forEach(e=>e?.classList.remove("disabled")),setTimeout(()=>{document.body.style.overflowY="",document.body.style.paddingRight=""},400),this.openElement.forEach(e=>e?.classList.remove("disabled")),setTimeout(()=>{this._options.focusInputAfterCloseModal&&this.input?.focus(),null!==this.modalElement&&(this.clockManager.destroyClockSystem(),this.modalElement.remove(),this._isModalRemove=!0)},300),n(i)},this._options.delayHandler||300);destroy=e=>{if(this._isDestroyed)return;const t="function"==typeof e?{callback:e}:e||{},{keepInputValue:i=!1,callback:s}=t,r=i?this.input?.value:null;this.domBatcher.destroy(),h.split(" ").forEach(e=>{document.removeEventListener(e,this._mutliEventsMoveHandler,!1)}),document.removeEventListener("mousedown",this.eventManager._onDragStart,!1),document.removeEventListener("touchstart",this.eventManager._onDragStart),document.removeEventListener("mousemove",this.eventManager._onDragMove,!1),document.removeEventListener("mouseup",this.eventManager._onDragEnd,!1),document.removeEventListener("touchmove",this.eventManager._onDragMove),document.removeEventListener("touchend",this.eventManager._onDragEnd,!1),document.removeEventListener("mouseleave",this.eventManager._onDragEnd,!1),document.removeEventListener("mousedown",this._eventsClickMobileHandler),document.removeEventListener("touchstart",this._eventsClickMobileHandler),this.modalElement?.remove(),this.openElement?.forEach(e=>{e&&(e.classList.remove("disabled","active","timepicker-ui-open-element"),e.classList.remove("basic","crane-straight","crane","m2","m3-green"))}),this.input&&(this.input.classList.remove("timepicker-ui-invalid-format","invalid-value","error","active","timepicker-ui-input"),this.input.removeAttribute("data-open"),this.input.removeAttribute("data-owner-id"),i&&null!==r&&(this.input.value=r)),this._element&&(this._element.classList.remove("basic","crane-straight","crane","m2","m3-green"),this._element.classList.remove("error","active","disabled"),this._element.removeAttribute("data-owner-id"),this._element.removeAttribute("data-open"),this._options.cssClass&&this._element.classList.remove(this._options.cssClass));const o=this._element?.querySelectorAll(".timepicker-ui-invalid-text");o?.forEach(e=>e.remove()),this._mutliEventsMoveHandler=()=>{},this._eventsClickMobileHandler=()=>{},this._mutliEventsMove=()=>{},this._eventsClickMobile=()=>Promise.resolve(),this._isModalRemove=!0,this._isTouchMouseMove=!1,this._disabledTime=null,this._cloned=null,this._degreesHours=null,this._degreesMinutes=null,this._isInitialized=!1,this._isDestroyed=!0,"undefined"!=typeof document&&(document.body.style.overflowY="",document.body.style.paddingRight=""),this.onDestroy?.(),n(s)};onDestroy;_eventsBundle=()=>{if(!this._isDestroyed&&this._isModalRemove){if(this._options.inline?.enabled||this.eventManager.handleEscClick(),this.validationManager.setErrorHandler(),this.validationManager.removeErrorHandler(),this._options.inline?.enabled||(this.openElement.forEach(e=>e?.classList.add("disabled")),this.input?.blur()),this.modalManager.setScrollbarOrNot(),this.modalManager.setModalTemplate(),this.modalManager.setNormalizeClass(),this.modalManager.removeBackdrop(),this.clockManager.setOnStartCSSClassesIfClockType24h(),this.clockManager.setClassActiveToHourOnOpen(),this.modalElement&&function(e=document){e.addEventListener("pointerdown",v),e.addEventListener("pointerup",g),e.addEventListener("pointercancel",g),e.querySelectorAll("[data-md3-ripple]").forEach(e=>{e.addEventListener("mouseleave",b)})}(this.modalElement),!this._isMobileView){const e=this.modalElement?.querySelector(".timepicker-ui-mobile-clock-wrapper"),t=this.modalElement?.querySelector(".timepicker-ui-wrapper"),i=this.modalElement?.querySelectorAll("*");e?.classList.add("expanded"),t?.classList.add("expanded"),i?.forEach(e=>{e.classList.contains("timepicker-ui-select-time")||e.classList.contains("timepicker-ui-mobile-clock-wrapper")||e.classList.contains("timepicker-ui-wrapper")||e.classList.add("expanded")})}this.modalManager.setFlexEndToFooterIfNoKeyboardIcon(),setTimeout(()=>{this.themeManager.setTheme();const e=this.modalElement?.querySelector(".timepicker-ui-wrapper");e&&(this._options.cssClass&&e.classList.add(this._options.cssClass),this._pendingThemeConfig&&this._applyThemeToWrapper(e))},0),this.animationManager.setAnimationToOpen(),this.configManager.getInputValueOnOpenAndSet(),this.clockManager.initializeClockSystem(),this.clockManager.toggleClassActiveToValueTips(this.hour.value),this._isMobileView||(this.clockManager.setTransformToCircleWithSwitchesHour(this.hour.value),this.animationManager.handleAnimationClock()),this.eventManager.handleMinutesEvents(),this.eventManager.handleHourEvents(),"24h"!==this._options.clockType&&(this.eventManager.handleAmClick(),this.eventManager.handlePmClick()),this.clockFace&&(this.eventManager.handleMoveHand(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.clockFace?.classList.add("scale-in")})})),this.eventManager.handleCancelButton(),this.eventManager.handleOkButton(),this.modalElement&&(this.modalManager.setShowClassToBackdrop(),this._options.inline?.enabled||this.eventManager.handleBackdropClick()),this.eventManager.handleClickOnHourMobile(),this.eventManager.handleIconChangeView(),this._options.focusTrap&&this.eventManager.focusTrapHandler(),this._options.inline?.enabled&&!1!==this._options.inline.autoUpdate&&this.eventManager.handleInlineAutoUpdate()}}}class he extends me{getValue=()=>{if(this._isDestroyed)return{hour:"",minutes:"",type:void 0,time:"",degreesHours:null,degreesMinutes:null};const e=this.hour?.value||"12",t=this.minutes?.value||"00",i="24h"===this._options.clockType?void 0:this.activeTypeMode?.textContent||"AM";let s="";return s="24h"===this._options.clockType?`${e.padStart(2,"0")}:${t.padStart(2,"0")}`:`${e}:${t.padStart(2,"0")} ${i}`,{hour:e,minutes:t,type:i,time:s,degreesHours:this._degreesHours,degreesMinutes:this._degreesMinutes}};setValue=(e,t=!0)=>{if(this._isDestroyed)return;if(!e||"string"!=typeof e)return;this._isInitialized||this.create();const i=l(e.trim());let s="12",r="00",n="AM";try{if("24h"===this._options.clockType){const e=i.match(/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/);if(!e)throw new Error("Invalid 24h format. Expected HH:MM");s=e[1].padStart(2,"0"),r=e[2]}else{const e=i.match(/^(1[0-2]|[1-9]):([0-5][0-9])\s*(AM|PM)$/i);if(!e)throw new Error("Invalid 12h format. Expected HH:MM AM/PM");s=e[1],r=e[2],n=e[3].toUpperCase()}this.hour&&(this.hour.value=s,this.hour.setAttribute("aria-valuenow",s),this._degreesHours=30*Number(s)),this.minutes&&(this.minutes.value=r,this.minutes.setAttribute("aria-valuenow",r),this._degreesMinutes=6*Number(r)),"24h"!==this._options.clockType&&this.AM&&this.PM&&("AM"===n?(this.AM.classList.add("active"),this.PM.classList.remove("active")):(this.PM.classList.add("active"),this.AM.classList.remove("active"))),t&&this.input&&(this.input.value=i),this.clockHand&&(this.clockHand.style.transform=`rotateZ(${this._degreesHours||0}deg)`)}catch(e){return}};update=(e,t)=>{this._isDestroyed||(this._options={...this._options,...e.options},this.configManager.checkMobileOption(),e.create&&this.create(),n(t))};setTheme(e){if(this._isDestroyed)return;this._pendingThemeConfig=e;const t=this.modalElement?.querySelector(".timepicker-ui-wrapper");t&&this._applyThemeToWrapper(t)}}const ue=new Map;return class extends he{constructor(e,t){if(super(e,t),this._isDestroyed)return;const i=t?.id;i&&ue.has(i)?this._isDestroyed=!0:(ue.set(this._instanceId,this),this.onDestroy=()=>{ue.delete(this._instanceId)})}static getById(e){return ue.get(e)}static getAllInstances(){return Array.from(ue.values())}static isAvailable(e){return"undefined"!=typeof window&&("string"==typeof e?null!==document.querySelector(e):e instanceof HTMLElement&&document.contains(e))}static destroyAll(){Array.from(ue.values()).forEach(e=>e.destroy()),ue.clear()}}});
